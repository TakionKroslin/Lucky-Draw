更新日志（中文）

概览: 本次对项目核心文件 index.html 进行了两类工作：
1) 修复与头像歪头/恢复/入场动效相关的若干 bug
2) 将文件内所有英文内联注释翻译为中文并补充说明。所有注释修改为非功能性变更，且已检查未改变可执行逻辑（但同时保留并记录了此前对动画逻辑的修复）。

修改文件: index.html

功能/行为修复（关键项）:

恢复动画闪现问题修复: 在恢复时先读取计算后的 transform 并写入内联样式（freeze），再播放平滑恢复动画，避免恢复过程中触发入场/重放动画导致的闪现。
避免 hover 与恢复/入场动画冲突: 移除或禁用了会与恢复动画冲突的 hover 效果（并在恢复期间通过类 is-tilted 禁用 hover），避免用户交互打断恢复流。
修正 .no-anim 导致恢复被禁用的问题: 不再在恢复阶段使用包含 animation: none !important 的 .no-anim 作为抑制方式（会阻止恢复动画），改为临时移除/恢复具体动画类与使用内联 transform。
确保歪头动画可重复触发（首次点击生效）: 在触发歪头前移除旧的歪头/入场类并强制重绘（void avatarBox.offsetWidth），以保证重新添加类时 CSS 动画能可靠重启，从而修复“要点三次才生效”的问题。
名字切换时序修复: 将显示真名/网名的切换逻辑整理到 toggleRealName() / restoreTilt() 的协作流程中，保证点击时名字切换与歪头/恢复动画同步（点击处于歪头状态将优先复位而非重复切换名字）。
即时抽取模式兼容性: 在直接抽取模式下，若当前处于歪头状态会立即清理歪头类并安全隐藏头像，避免残留动画导致的显示异常。
收缩/吸入隐藏流程稳定性: triggerShrinkHide() 中明确清除入场/抽取类、内联动画样式并强制刷新，保证开始新一轮抽取时的隐藏过渡稳定、不会遗留状态。
回退/清理保障: 恢复完成后有 animationend 事件回调与超时回退清理（fallback），以避免在极端情况下留下半挂状态。
注释与可维护性:

将脚本顶部总体说明、变量定义、核心功能模块说明、以及 applyRandomTilt / restoreTilt / toggleRealName / triggerShrinkHide 等处的英文注释翻译为中文并补充必要的实现说明，便于团队阅读与后续维护。
保留注释位置与原始代码结构，未对逻辑或算法进行非必要改动（注释替换为主）。
风险与测试建议:

已做静态检查以确保无意修改可执行代码，但动画类与时序相关的修复需要在浏览器中实际交互验证（建议在 Chrome/Edge/Firefox 做一次冒烟测试：开始滚动、停止、点击头像（多次）、切换即时模式、切换筛选并观察动画与名字切换）。
若仍遇到极端设备/浏览器兼容性问题，可考虑将关键恢复逻辑改为 Web Animations API 或增加更明确的 CSS 状态机，但目前实现以兼容传统 CSS 动画为主以保持浏览器覆盖面。
感谢各位的耐心与支持，期待大家继续反馈使用体验！
作者: Takion Kroslin
日期: 2025-12-28
版本：2.1.1
版权: © 2025 Takion Kroslin 保留所有权利
许可证: 本代码遵循 Apache 2.0 许可证，详情见 LICENSE 文件。
预祝大家新年快乐